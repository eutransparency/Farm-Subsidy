{% extends "base.html" %}
{% load i18n %}
{% load markup %}
{% block page_title %}{{ list_item.name }}{% endblock %}
{% block title %}{{ list_item.name }}{% endblock %}
{% block content %}
  {{ list_item.description|markdown }}
  <p class="hint"><a href="{% url edit_list list_item.pk %}">Edit title and description</a></p>
  
  <div class="section">
  <h3>Items</h3>
    
  {% if list_item.listitem_set.all %}
  <a href="{% url edit_list_items list_item.pk %}">Add Items</a>
  <table>
    <thead>
      <th>Name</th>
      <th>Payments</th>
      <th>Amount</th>
    </thead>
    <tbody>
      {% for item in list_item.listitem_set.all %}
        <tr>
          <td>{{ item.content_object.name }} ({{ item.content_object.recipient_id }})</td>
          <td>
            ---
            <ul>{% for payment in item.content_object.payment_set.all %}
            <li>
              {{ payment.amount }}
              {{ payment.scheme }}
            </li>
          {% endfor %}</ul>
          
          
          </td>
          <td>{{ item.content_object.port.name }}</td>
          <td>{{ item.content_object.amount }}</td>
        </tr>
      {% endfor %}
      <p></p>
    </tbody>
  </table>
  {% else %}
  {% ifequal user.pk list_item.user.pk  %}
  There is nothing in your list yet.  
  <p class="hint"><a href="{% url edit_list_items list_item.pk %}">Add Items</a></p>
  {% else %}
  The list owner hasn't added any items to this list yet.
  {% endifequal %}
  {% endif %}
  </div>
  
{% endblock %}